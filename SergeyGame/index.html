<!DOCTYPE HTML>
<html>
	<head>
		<script src="SergeyGame.js" ></script>
		<script src="ion.js" ></script>
		<title>SergeyGame</title>
		<link rel="stylesheet" href="style.css">
	</head>

	<body>
	<script>
	function makeGame(plNum,players)
	{
		var plNum=ionGetPlayersNum();
		var players=ionGetPlayers();
		var numberCount=100;
		if(plNum<2){alert("You must have at least 2 players!");return 0;}
		if(numberCount%plNum!=0){alert("You can not play with "+plNum+" players and "+numberCount+" numbers!");return 0;}
		var game=new Game();
		for(var i=0;i<plNum;i++)
		{
			game.addPlayer(players[i]);
		}
		game.setNumberCount(numberCount);
		game.giveNumbers();
		game.genTargetNumber();
		game.findWinner();
		console.log("Target number "+game.getTargetNumber());
		console.log("Winner "+game.getWinnerName());
		players	=game.getPlayers();
		var winnerName=game.getWinnerName();
		var str="";
		for(var i=0;i<plNum;i++)
		{
			if(players[i].getName()==winnerName){
				str+='<tr><td class="winner">'+players[i].getName()+"</div>";
			}
			else{
				str+="<tr><td>"+players[i].getName();
			}
			var numbers=players[i].getNumberArray();
			for(var j=0;j<(numberCount/plNum);j++)
			{
				str+="<td width=40>"+numbers[j];
			}
		}
		document.getElementById('resultTable').innerHTML+=str;
		document.getElementById('winnerBlock').innerHTML+="<h4>Winner: "+winnerName+"</h4>";
	}
	</script>
		<div>
			<div class="playerListBrd">
				<button id="addPlayerButton" onclick="addPlayer()">Add player</button> 
				<p><h2>Players</h2></p>
				<h4>
					<ul id="playerList">
					</ul>
				</h4>
			</div>
		</div>		
		<div id="startGameDiv" class="startGameBrd">
			<button id="startGameButton" onclick="makeGame()">Start game</button>
			<!--<button id="clearButton">Clear</button>-->
		</div>
		
		<div>
			<div class="resultsBrd">
				<p><h2>Game results</h2></p>
				<h4>
				<table id='resultTable'>
					<tr>
						<td width=120>Player's names:</td>
						<td width='75%' align=center colspan=20>Numbers:</td>
					</tr>
					
				</table>
				</ul>
				<div id="winnerBlock"></div>
				</h4>
			</div>
		</div>
	</body>
	
</html>